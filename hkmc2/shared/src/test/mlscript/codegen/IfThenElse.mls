:js

:import PredefJS.mls
//│ Imported 2 member(s)


// :elt
if true then 1 else 0
//│ = 1


:sjs
let f = x => if x then log("ok") else log("ko")
//│ JS (unsanitized):
//│ this.f = (x) => { if (x === true) { return this.log("ok"); } else { return this.log("ko"); } }; null
//│ f = [Function (anonymous)]

f(true)
//│ > ok

f(false)
//│ > ko


:sjs
let f = x => log((if x then "ok" else "ko") + "!")
//│ JS (unsanitized):
//│ let tmp;
//│ tmp = (x) => {
//│   let tmp1, tmp2;
//│   if (x === true) {
//│     tmp1 = "ok";
//│   } else {
//│     tmp1 = "ko";
//│   }
//│   tmp2 = tmp1 + "!";
//│   return this.log(tmp2);
//│ };
//│ this.f = tmp;
//│ null
//│ f = [Function: tmp]

:sjs
let f = x => log((if x and x then "ok" else "ko") + "!")
// --- TODO: What we want ---
// this.f = (x) => {
//   let tmp, tmp1, flag;
//   if (x) {
//     if (x) {
//       tmp = "ok";
//     } else {
//       flag = 1;
//     }
//   } else {
//     flag = 1;
//   }
//   if (flag === 1) {
//     tmp = "ko";
//   }
//   tmp1 = tmp + "!";
//   return log(tmp1)
// };
// undefined
// f = [Function (anonymous)]
//│ JS (unsanitized):
//│ let tmp;
//│ tmp = (x) => {
//│   let tmp1, tmp2;
//│   if (x === true) {
//│     if (x === true) {
//│       tmp1 = "ok";
//│     } else {
//│       tmp1 = "ko";
//│     }
//│   } else {
//│     tmp1 = "ko";
//│   }
//│   tmp2 = tmp1 + "!";
//│   return this.log(tmp2);
//│ };
//│ this.f = tmp;
//│ null
//│ f = [Function: tmp]

f(true)
//│ > ok!

f(false)
//│ > ko!


x => if x > 0 then log("Hi") else log("Bye")
//│ = [Function (anonymous)]

x => log(if true then "Hi" else "Bye")
//│ = [Function (anonymous)]

x => log(if x + 1 > 0 then "Hi" else "Bye")
//│ = [Function (anonymous)]

x =>
  let str = concat(if x + 1 > 0 then "Hello" else "Bye", "World")
  log(str)
//│ = [Function (anonymous)]


fun f(x, y) =
  if x
    then y

f(true, 42)
//│ = 42

:re
f(false, 42)
//│ ═══[RUNTIME ERROR] Error: match error


fun f(x, y, z) = if x then y else z

f(true, 0, 1)
//│ = 0


fun f(x, y, z) =
  if x
    then y
    else z

f(true, 1, 0)
//│ = 1

f(false, 1, 0)
//│ = 0


if true then
  100
//│ = 100

if true then
  100
else
  0
//│ = 100

if true then
  100
else
  fun f(x) = x
  f(3)
//│ = 100

if true then
  fun f(x) = x
  f(3)
else
  100
//│ = 3


