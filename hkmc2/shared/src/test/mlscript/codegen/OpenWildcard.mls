:js


import "../../mlscript-compile/Option.mls"

module OtherModule with
  val None = 123


:sjs
open Option
//│ JS (unsanitized):
//│ null

:sjs
None isDefined()
//│ JS (unsanitized):
//│ Option.isDefined(Option.None)
//│ = false

Some(1) isDefined()
//│ = true

None === Option.None
//│ = true


fun none() = None

open OtherModule

None === Option.None
//│ = false

none() === Option.None
//│ = true


open Option
fun none() = None
console.log(None)
open OtherModule
console.log(None)
none()
//│ > None { class: [class None] }
//│ > 123
//│ = None { class: [class None] }


// * `open` statements are hygienic and are not affected by redefinitions

:sjs
val Option = "Oops"
//│ JS (unsanitized):
//│ let Option2; Option2 = "Oops"; null
//│ Option = 'Oops'

:sjs
Some(123)
//│ JS (unsanitized):
//│ Option.Some(123)
//│ = Some { value: 123 }

module Option with
  val None = 123

:sjs
open Option
//│ JS (unsanitized):
//│ null

:sjs
Some
//│ JS (unsanitized):
//│ Option.Some
//│ = [Function: Some] { class: [class Some] }

:sjs
None
//│ JS (unsanitized):
//│ Option4.None
//│ = 123


