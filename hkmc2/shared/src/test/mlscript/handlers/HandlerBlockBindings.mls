:js
:handler


abstract class Effect with
  fun perform(arg: Str): Str


// non-resumptive handlers
handle h = Effect with
  fun perform(arg)(k) =
    "x"
h.perform("y")
let x = 123
//│ = "x"

:fixme
x
//│ ╔══[ERROR] Name not found: x
//│ ║  l.18: 	x
//│ ╙──      	^

handle h = Effect with
  fun perform(arg)(k) =
    print(arg)
let x = 123

:fixme
x
//│ ╔══[ERROR] Name not found: x
//│ ║  l.29: 	x
//│ ╙──      	^


:fixme
handle h = Effect with
  fun perform(arg)(k) =
    print(arg)
val y = 123
//│ /!!!\ Uncaught error: hkmc2.InternalError: Not in scope: member:y (class hkmc2.semantics.BlockMemberSymbol)

:fixme
:expect 123
y
//│ /!!!\ Uncaught error: hkmc2.InternalError: Not in scope: member:y (class hkmc2.semantics.BlockMemberSymbol)


